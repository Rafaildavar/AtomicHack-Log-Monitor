# üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–¢–µ–ø–µ—Ä—å **–ù–ï –ù–£–ñ–ù–û** –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤!  
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∞–Ω–∞–ª–∏–∑–µ —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —ç—Ç–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

---

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —Ñ–∞–π–ª–∞**
```typescript
// –í api/main.py
// –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∞–π–ª —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
file_id = hashlib.md5(f"{log_file.filename}_{time.time()}".encode()).hexdigest()
permanent_path = os.path.join(UPLOADS_DIR, f"{file_id}_{log_file.filename}")
shutil.copy2(log_file_path, permanent_path)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `api/uploads/` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
- `file_id` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ API
- `file_id` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `localStorage` –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∞–Ω–∞–ª–∏–∑–æ–≤

### 2. **–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–∞**
```typescript
// –í GraphModal.tsx
const response = await api.post(`/api/v1/timeline/by-file-id/${fileId}`, 
  targetFilename ? { selected_file: targetFilename } : {},
);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- API –Ω–∞—Ö–æ–¥–∏—Ç —Ñ–∞–π–ª –ø–æ `file_id` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `uploads/`
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫ –ë–ï–ó –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π HTML —Å –≥—Ä–∞—Ñ–∏–∫–æ–º

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```
api/
‚îú‚îÄ‚îÄ uploads/           # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞)
‚îÇ   ‚îú‚îÄ‚îÄ abc123_app.log.txt
‚îÇ   ‚îú‚îÄ‚îÄ def456_ValidationCases.zip
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ reports/           # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Excel –æ—Ç—á–µ—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ analysis_report_1.xlsx
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ main.py
```

---

## üöÄ –ù–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### `POST /api/v1/timeline/by-file-id/{file_id}`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Timeline –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è —Ä–∞–Ω–µ–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `file_id` (path) - ID —Ñ–∞–π–ª–∞ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- `selected_file` (body, optional) - –∏–º—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–∑ ZIP –∞—Ä—Ö–∏–≤–∞

**–ü—Ä–∏–º–µ—Ä –¥–ª—è TXT:**
```typescript
POST /api/v1/timeline/by-file-id/abc123
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è ZIP:**
```typescript
POST /api/v1/timeline/by-file-id/def456
Body: { "selected_file": "app_server1_log.txt" }
```

**–û—Ç–≤–µ—Ç:**
```html
<html>...</html>  // HTML —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º Plotly –≥—Ä–∞—Ñ–∏–∫–æ–º
```

---

## üé® –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ UI

### Dashboard ‚Üí –ö–Ω–æ–ø–∫–∞ "–ì—Ä–∞—Ñ–∏–∫–∏"

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç **"–ì—Ä–∞—Ñ–∏–∫–∏"** –Ω–∞ –ª—é–±–æ–º –∞–Ω–∞–ª–∏–∑–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ `GraphModal`
3. **–î–ª—è TXT —Ñ–∞–π–ª–æ–≤:**
   - –°—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫"
   - –ì—Ä–∞—Ñ–∏–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ë–ï–ó –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
4. **–î–ª—è ZIP —Ñ–∞–π–ª–æ–≤:**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∞—Ä—Ö–∏–≤–∞
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª
   - –ù–∞–∂–∏–º–∞–µ—Ç "–ü–æ–∫–∞–∑–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫"
   - –ì—Ä–∞—Ñ–∏–∫ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ë–ï–ó –∑–∞–≥—Ä—É–∑–∫–∏ ZIP

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ‚úÖ

- ‚ùå **–ù–µ –Ω—É–∂–Ω–æ** –∏—Å–∫–∞—Ç—å —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫–µ
- ‚ùå **–ù–µ –Ω—É–∂–Ω–æ** –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª –∑–∞–Ω–æ–≤–æ
- ‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è** –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö** –∞–Ω–∞–ª–∏–∑–æ–≤ –≤ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ ZIP** —Å –≤—ã–±–æ—Ä–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å **—É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ ID** (MD5 hash)
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–≥–∞–¥–∞—Ç—å ID —Ñ–∞–π–ª–∞
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `api/uploads/` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `.gitignore`
- –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üßπ –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—á–∏—Å—Ç–∫—É —Ñ–∞–π–ª–æ–≤ —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π:

```python
# –í api/main.py
import os
import time

def cleanup_old_uploads(days=30):
    """–£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã —Å—Ç–∞—Ä—à–µ N –¥–Ω–µ–π –∏–∑ uploads/"""
    cutoff = time.time() - (days * 86400)
    for filename in os.listdir(UPLOADS_DIR):
        file_path = os.path.join(UPLOADS_DIR, filename)
        if os.path.getmtime(file_path) < cutoff:
            os.remove(file_path)
            logger.info(f"–£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª: {filename}")
```

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### Backend (`api/main.py`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `UPLOADS_DIR`
- ‚úÖ –§–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `file_id` –≤ –æ—Ç–≤–µ—Ç
- ‚úÖ –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/v1/timeline/by-file-id/{file_id}`

### Frontend
- ‚úÖ `AnalyzeResponse` - –¥–æ–±–∞–≤–ª–µ–Ω—ã `file_id` –∏ `filename`
- ‚úÖ `Analyze.tsx` - `file_id` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ `GraphModal.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `file_id` –≤–º–µ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ `Dashboard.tsx` - –ø–µ—Ä–µ–¥–∞–µ—Ç `file_id` –≤ –º–æ–¥–∞–ª

---

## üéâ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç **–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫** –¥–ª—è –ª—é–±–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏, –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤!

